{% extends "base.html" %}

{% block headscript %}
<meta http-equiv="refresh" content="10" />
<style>
  /* Barcodes on top row, table below (full-width). */
  .barcode-wrapper {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 1rem;
    box-sizing: border-box;
    min-width: 0;
  }

  .qr-row {
    display: flex;
    align-items: center;
    width: 50%; /* set width to 50% */
    flex-wrap: wrap; /* allow barcodes to wrap to next line */
    flex-direction: row; /* set flex-direction to row */
    justify-content: space-between; /* add space between the two barcodes */
  }

  .qr-block {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 200px; /* set width to a fixed value */
    max-width: 200px; /* set width to a fixed value */
    height: 200px; /* set height to a fixed value */
  }

  .qr-block img {
    width: 200px; /* set width to a fixed value */
    height: 200px; /* set height to a fixed value */
  }

  .qr-row > div:first-child {
    order: 1; /* place the left barcode first */
    margin-left: 0; /* remove default margin */
  }

  .qr-row > div:last-child {
    order: 2; /* place the right barcode second */
    margin-right: 0; /* remove default margin */
  }

  .qr-row > div {
    flex-shrink: 0; /* prevent barcodes from shrinking */
  }

  /* Move the table below the barcodes */
  .queue-table-container {
    margin-top: 1rem; /* add some spacing between barcodes and table */
  }
</style>

{% endblock %}

{% block content %}
<div class="barcode-wrapper">
  <div class="qr-row">
    <div class="qr-block">
      <span class="qr-label">{{ _('ROOM') }}</span>
      <img id="signup-qrcode" src="data:image/png;base64,{{ signup_img }}" alt="signup qr" />
    </div>

    <div class="qr-block">
      <span class="qr-label">{{ _('HOST') }}</span>
      <img id="login-qrcode" src="data:image/png;base64,{{ login_img }}" alt="login qr" />
    </div>
  </div>

  <div class="queue-table-container">
    <table class="table queue-table">
      <thead>
        <tr>
          <th style="width: 48px;">#</th>
          <th style="width: 20%;">{{ _('Singer') }}</th>
          <th style="width: 45%;">{{ _('Music') }}</th>
          <th style="width: 25%;">{{ _('Artist') }}</th>
          <th style="width: 48px;">D</th>
        </tr>
      </thead>
      <tbody>
        {% for queue_item in queue %}
        <tr>
          <td>
            {% if queue_item.status == 'P' %}
            <img class="icon-small" src="{{ url_for('static', filename='images/icon-play.png') }}" alt="play" />
            {% else %}
            {{ queue_item.order }}
            {% endif %}
          </td>
          <td>{{ queue_item.singer }}</td>
          <td>{{ queue_item.song }}</td>
          <td>{{ queue_item.artist }}</td>
          <td>
            {% if queue_item.status == 'D' %}
            <img class="icon-small" src="{{ url_for('static', filename='images/icon-download.png') }}" alt="dl" />
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}